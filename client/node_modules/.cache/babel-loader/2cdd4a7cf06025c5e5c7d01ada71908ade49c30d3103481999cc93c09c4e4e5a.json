{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fixRequestBody = void 0;\nconst querystring = require(\"querystring\");\n/**\n * Fix proxied body if bodyParser is involved.\n */\nfunction fixRequestBody(proxyReq, req) {\n  const requestBody = req.body;\n  if (!requestBody) {\n    return;\n  }\n  const contentType = proxyReq.getHeader('Content-Type');\n  const writeBody = bodyData => {\n    // deepcode ignore ContentLengthInCode: bodyParser fix\n    proxyReq.setHeader('Content-Length', Buffer.byteLength(bodyData));\n    proxyReq.write(bodyData);\n  };\n  if (contentType && contentType.includes('application/json')) {\n    writeBody(JSON.stringify(requestBody));\n  }\n  if (contentType && contentType.includes('application/x-www-form-urlencoded')) {\n    writeBody(querystring.stringify(requestBody));\n  }\n}\nexports.fixRequestBody = fixRequestBody;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}