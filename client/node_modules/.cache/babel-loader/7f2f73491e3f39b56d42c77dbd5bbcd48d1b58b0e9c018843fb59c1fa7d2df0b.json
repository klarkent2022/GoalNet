{"ast":null,"code":"\"use strict\";\n\n/* eslint-disable prefer-rest-params */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getArrow = exports.getInstance = void 0;\nconst util = require(\"util\");\nlet loggerInstance;\nconst defaultProvider = {\n  // tslint:disable: no-console\n  log: console.log,\n  debug: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\n// log level 'weight'\nvar LEVELS;\n(function (LEVELS) {\n  LEVELS[LEVELS[\"debug\"] = 10] = \"debug\";\n  LEVELS[LEVELS[\"info\"] = 20] = \"info\";\n  LEVELS[LEVELS[\"warn\"] = 30] = \"warn\";\n  LEVELS[LEVELS[\"error\"] = 50] = \"error\";\n  LEVELS[LEVELS[\"silent\"] = 80] = \"silent\";\n})(LEVELS || (LEVELS = {}));\nfunction getInstance() {\n  if (!loggerInstance) {\n    loggerInstance = new Logger();\n  }\n  return loggerInstance;\n}\nexports.getInstance = getInstance;\nclass Logger {\n  constructor() {\n    this.setLevel('info');\n    this.setProvider(() => defaultProvider);\n  }\n  // log will log messages, regardless of logLevels\n  log() {\n    this.provider.log(this._interpolate.apply(null, arguments));\n  }\n  debug() {\n    if (this._showLevel('debug')) {\n      this.provider.debug(this._interpolate.apply(null, arguments));\n    }\n  }\n  info() {\n    if (this._showLevel('info')) {\n      this.provider.info(this._interpolate.apply(null, arguments));\n    }\n  }\n  warn() {\n    if (this._showLevel('warn')) {\n      this.provider.warn(this._interpolate.apply(null, arguments));\n    }\n  }\n  error() {\n    if (this._showLevel('error')) {\n      this.provider.error(this._interpolate.apply(null, arguments));\n    }\n  }\n  setLevel(v) {\n    if (this.isValidLevel(v)) {\n      this.logLevel = v;\n    }\n  }\n  setProvider(fn) {\n    if (fn && this.isValidProvider(fn)) {\n      this.provider = fn(defaultProvider);\n    }\n  }\n  isValidProvider(fnProvider) {\n    const result = true;\n    if (fnProvider && typeof fnProvider !== 'function') {\n      throw new Error('[HPM] Log provider config error. Expecting a function.');\n    }\n    return result;\n  }\n  isValidLevel(levelName) {\n    const validLevels = Object.keys(LEVELS);\n    const isValid = validLevels.includes(levelName);\n    if (!isValid) {\n      throw new Error('[HPM] Log level error. Invalid logLevel.');\n    }\n    return isValid;\n  }\n  /**\n   * Decide to log or not to log, based on the log levels 'weight'\n   * @param  {String}  showLevel [debug, info, warn, error, silent]\n   * @return {Boolean}\n   */\n  _showLevel(showLevel) {\n    let result = false;\n    const currentLogLevel = LEVELS[this.logLevel];\n    if (currentLogLevel && currentLogLevel <= LEVELS[showLevel]) {\n      result = true;\n    }\n    return result;\n  }\n  // make sure logged messages and its data are return interpolated\n  // make it possible for additional log data, such date/time or custom prefix.\n  _interpolate(format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    const result = util.format(format, ...args);\n    return result;\n  }\n}\n/**\n * -> normal proxy\n * => router\n * ~> pathRewrite\n * ≈> router + pathRewrite\n *\n * @param  {String} originalPath\n * @param  {String} newPath\n * @param  {String} originalTarget\n * @param  {String} newTarget\n * @return {String}\n */\nfunction getArrow(originalPath, newPath, originalTarget, newTarget) {\n  const arrow = ['>'];\n  const isNewTarget = originalTarget !== newTarget; // router\n  const isNewPath = originalPath !== newPath; // pathRewrite\n  if (isNewPath && !isNewTarget) {\n    arrow.unshift('~');\n  } else if (!isNewPath && isNewTarget) {\n    arrow.unshift('=');\n  } else if (isNewPath && isNewTarget) {\n    arrow.unshift('≈');\n  } else {\n    arrow.unshift('-');\n  }\n  return arrow.join('');\n}\nexports.getArrow = getArrow;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}